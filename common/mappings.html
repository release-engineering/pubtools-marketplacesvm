<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Destination Mapping &#8212; pubtools-marketplacesvm  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=32913b9a" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Supported Sources" href="sources.html" />
    <link rel="prev" title="Credentials" href="credentials.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="destination-mapping">
<h1>Destination Mapping<a class="headerlink" href="#destination-mapping" title="Link to this heading">¶</a></h1>
<p>The destination mapping is given by an internal service named <code class="docutils literal notranslate"><span class="pre">StArMap</span></code> throught the <a class="reference external" href="https://release-engineering.github.io/starmap-client/">Starmap Client</a> library.</p>
<p>The tool expects a valid endpoint to the StArMap service and/or a JSON string containing the list of mappings
using the parameter <code class="docutils literal notranslate"><span class="pre">--repo</span></code>.</p>
<p>The following sections will cover all the details about the destination mappings.</p>
<section id="mapping-request-modes">
<h2>Mapping request modes<a class="headerlink" href="#mapping-request-modes" title="Link to this heading">¶</a></h2>
<section id="online-mode">
<h3>Online mode<a class="headerlink" href="#online-mode" title="Link to this heading">¶</a></h3>
<p>In this mode the tooling will use the <a class="reference external" href="https://release-engineering.github.io/starmap-client/">Starmap Client</a> library to connect into a StArMap server to provide
the mappings for each <a class="reference external" href="https://release-engineering.github.io/pushsource/model/vmi.html">VMIPushItem</a> into the proper marketplace destination.</p>
<p>To initiate the tooling into the “online mode” it’s just a matter of providing a valid StArMap server URL</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">starmap</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">starmap</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">url</span>
</pre></div>
</div>
<p>The workflow will be executed like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># For each incoming &quot;VMIPushItem&quot; get its destination data from StArMap
# using the image name, version and the desired workflow
curl -S https://starmap.base.url/api/v1/query?name=IMG_NAME&amp;version=IMG_VERworkflow=community
curl -S https://starmap.base.url/api/v1/query?name=IMG_NAME&amp;version=IMG_VER&amp;workflow=stratosphere

# If mapping not defined =&gt; fail; else
# Upload and publish the VMs into the proper destinations
...
</pre></div>
</div>
</section>
<section id="offline-mode">
<h3>Offline mode<a class="headerlink" href="#offline-mode" title="Link to this heading">¶</a></h3>
<p>In this mode the tooling will use the <a class="reference external" href="https://release-engineering.github.io/starmap-client/">Starmap Client</a> library to load the mappings from the <code class="docutils literal notranslate"><span class="pre">--repo</span></code> argument
and use these mappings to upload and publish each <a class="reference external" href="https://release-engineering.github.io/pushsource/model/vmi.html">VMIPushItem</a> into the proper marketplace destination. In this mode
it will fail any <a class="reference external" href="https://release-engineering.github.io/pushsource/model/vmi.html">VMIPushItem</a> which doesn’t have a mapping specified on <code class="docutils literal notranslate"><span class="pre">--repo</span></code>.</p>
<p>Note that no network calls will be made to the StArMap server in this mode, so the <code class="docutils literal notranslate"><span class="pre">--starmap-url</span></code> can be
any fake url.</p>
<p>To initiate the tooling into the “offline mode” you must specify the <code class="docutils literal notranslate"><span class="pre">--repo</span></code> mappings as well as the flag <code class="docutils literal notranslate"><span class="pre">--offline</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">starmap</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">some</span><span class="o">.</span><span class="n">fake</span><span class="o">.</span><span class="n">url</span> \
<span class="o">--</span><span class="n">repo</span> <span class="s2">&quot;{...}&quot;</span> \
<span class="o">--</span><span class="n">offline</span>
</pre></div>
</div>
<p>The workflow will be executed like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># For each incoming &quot;VMIPushItem&quot; get its destination data from --repo</span>
<span class="c1"># using the image name and the desired workflow</span>
<span class="c1"># If mapping not defined =&gt; fail; else</span>
<span class="c1"># Upload and publish the VMs into the proper destinations</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
<section id="hybrid-mode">
<h3>Hybrid mode<a class="headerlink" href="#hybrid-mode" title="Link to this heading">¶</a></h3>
<p>In this mode the tooling will use the <a class="reference external" href="https://release-engineering.github.io/starmap-client/">Starmap Client</a> library to load the mappings from the <code class="docutils literal notranslate"><span class="pre">--repo</span></code> argument
and use these mappings to upload and publish each <a class="reference external" href="https://release-engineering.github.io/pushsource/model/vmi.html">VMIPushItem</a> into the proper marketplace destination. Howevever,
if a certain mapping is not defined on repo it will request the data from the StArMap server.</p>
<p>Note that no network calls will be made to the StArMap server in this mode, so the <code class="docutils literal notranslate"><span class="pre">--starmap-url</span></code> can be
any fake url.</p>
<p>To initiate the tooling into the “offline mode” you must specify the <code class="docutils literal notranslate"><span class="pre">--repo</span></code> mappings as well as
valid StArMap server URL for fallback:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">starmap</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">starmap</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">url</span> \
<span class="o">--</span><span class="n">repo</span> <span class="s2">&quot;{...}&quot;</span>
</pre></div>
</div>
<p>The workflow will be executed like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># For each incoming &quot;VMIPushItem&quot; get its destination data from --repo
# using the image name and the desired workflow
# If mapping not defined call the StArMap server
curl -S https://starmap.base.url/api/v1/query?name=IMG_NAME&amp;version=IMG_VERworkflow=community
curl -S https://starmap.base.url/api/v1/query?name=IMG_NAME&amp;version=IMG_VER&amp;workflow=stratosphere
# If mapping is still not defined =&gt; fail; else
# Upload and publish the VMs into the proper destinations
...
</pre></div>
</div>
</section>
</section>
<section id="mapping-format">
<h2>Mapping Format<a class="headerlink" href="#mapping-format" title="Link to this heading">¶</a></h2>
<p>The value for the <code class="docutils literal notranslate"><span class="pre">--repo</span></code> argument expects a JSON with either a single or multiple <a class="reference external" href="https://release-engineering.github.io/starmap-client/model/models.html#starmap_client.models.QueryResponse">QueryResponse</a> data.</p>
<p>With that, it supports either a JSON starting with a list (for multiple mappings) or a dictionary (single mapping).</p>
<p>The StArMap APIv1 <a class="reference external" href="https://release-engineering.github.io/starmap-client/model/models.html#starmap_client.models.QueryResponse">QueryResponse</a> has the following format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name from the image’s NVR. It will be used to match the propre VM artifact.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workflow</span></code>: Can be either <code class="docutils literal notranslate"><span class="pre">community</span></code> or <code class="docutils literal notranslate"><span class="pre">stratosphere</span></code> and it’s used to match the tooling workflow.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mappings</span></code>: The <code class="docutils literal notranslate"><span class="pre">clouds</span></code> object with the marketplace name and its destinations and metadata</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">mappings</span></code> object has the following format:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;MARKETPLACE_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;overwrite&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bool&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;str&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;restrict_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bool&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;restrict_major&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bool&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;restrict_minor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bool&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">       </span><span class="p">},</span>
<span class="w">       </span><span class="p">{</span><span class="s2">&quot;...&quot;</span><span class="p">}</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MARKETPLACE_NAME</span></code>: A string matching a single <a class="reference external" href="credentials.html">marketplace_account</a> from credentials. E.g. <code class="docutils literal notranslate"><span class="pre">aws-na</span></code>.
It’s used the retrieve the proper credentials to upload and publish into the given marketplace.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIST</span></code>: A list of destination objects, which are described below.</p></li>
</ul>
<p>Destination objects format:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">architecture</span></code>: A string representing the VM image architecture to publish. E.g. <code class="docutils literal notranslate"><span class="pre">x86_64</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">destination</span></code>: A string representing a offer/plan destination for the image to be published. E.g. <code class="docutils literal notranslate"><span class="pre">offer_1/plan_1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta</span></code>: An object with any key/values which may be threated as complementary metadata for publishing on marketplaces.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">overwrite</span></code>: A boolean indicating whenever the image should replace the existing version (true) in the marketplace.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">provider</span></code>: A string meant to be used only on community workflow. It indicates the provider name (<code class="docutils literal notranslate"><span class="pre">AWS</span></code>, <code class="docutils literal notranslate"><span class="pre">AGOV</span></code>, <code class="docutils literal notranslate"><span class="pre">ACN</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">restrict_version</span></code>: A boolean for AWS marketplace only which indicates whether a previous version need to be restricted after publishing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">restrict_major</span></code>: An optional boolean indicating whether to restrict a major version. Only applicable if <code class="docutils literal notranslate"><span class="pre">restrict_version</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">restrict_minor</span></code>: An optional boolean indicating whether to restrict a minor version. Only applicable if <code class="docutils literal notranslate"><span class="pre">restrict_version</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code>: An object with any key/values to be applied as tags once the VM images are uploaded.</p></li>
</ul>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h3>
<p>An <strong>Azure</strong> mapping for <code class="docutils literal notranslate"><span class="pre">RHEL</span></code> using the architecture <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> to be published in the marketplace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-S<span class="w"> </span><span class="s1">&#39;https://starmap.base.url/api/v1/query?name=rhel-azure&amp;version=8.0&amp;workflow=stratosphere&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rhel-azure&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stratosphere&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;azure-na&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x86_64&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rh-rhel-test/rh-rhel8-internal&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;generation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;V2&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;support_legacy&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;overwrite&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;restrict_major&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;restrict_minor&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;restrict_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An <strong>AWS</strong> mapping for <code class="docutils literal notranslate"><span class="pre">RHEL</span></code> using the architecture <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> to be published in the marketplace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-S<span class="w"> </span><span class="s1">&#39;https://starmap.base.url/api/v1/query?name=rhel-ec2&amp;workflow=stratosphere&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rhel-ec2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;stratosphere&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;aws-na&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x86_64&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;d87bcebf-9cf4-47f5-9b5b-5470d4490f3d&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Provided by Red Hat, Inc.&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;ena_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;marketplace_entity_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AmiProduct&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;recommended_instance_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;m5dn.2xlarge&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;release&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Red Hat Enterprise Linux&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ga&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;variant&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Server&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;release_notes&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/{major_version}/html/{major_minor}_release_notes/index&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;root_device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/dev/sda1&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;scanning_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;security_groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;from_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;ip_protocol&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tcp&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;ip_ranges&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="s2">&quot;0.0.0.0/0&quot;</span>
<span class="w">                        </span><span class="p">],</span>
<span class="w">                        </span><span class="nt">&quot;to_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;sriov_net_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;simple&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;usage_instructions&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Access your instance via ssh using the default username \&quot;ec2-user\&quot; and the ssh key registered with AWS. This product provides access to multiple versions. When launching with 1-click launch, please pay attention to the version. You have the ability to select another version of the RHEL image (including RHEL 8 and newer) when launching from the full AWS Marketplace website.&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;user_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ec2-user&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;virtualization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hvm&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;volume&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gp2&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;overwrite&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;restrict_major&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;restrict_minor&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;restrict_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An <strong>AWS</strong> mapping for <code class="docutils literal notranslate"><span class="pre">RHEL</span></code> using the architecture <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> to be published as a community image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-S<span class="w"> </span><span class="s1">&#39;https://starmap.base.url/api/v1/query?name=rhel-ec2&amp;workflow=community&#39;</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rhel-ec2&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;community&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;aws-us-storage&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;us-east-1-access&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Provided by Red Hat, Inc.&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ena_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;release&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RHEL&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ga&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;variant&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BaseOS&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;root_device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/dev/sda1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;sriov_net_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;simple&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;virtualization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hvm&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;volume&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gp3&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;overwrite&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AWS&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_major&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_minor&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;us-east-2-access&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Provided by Red Hat, Inc.&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ena_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;release&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RHEL&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ga&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;variant&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BaseOS&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;root_device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/dev/sda1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;sriov_net_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;simple&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;virtualization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hvm&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;volume&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gp3&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;overwrite&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AWS&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_major&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_minor&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;us-west-1-access&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Provided by Red Hat, Inc.&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ena_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;release&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RHEL&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ga&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;variant&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BaseOS&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;root_device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/dev/sda1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;sriov_net_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;simple&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;virtualization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hvm&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;volume&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gp3&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;overwrite&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AWS&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_major&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_minor&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;architecture&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;us-west-2-access&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Provided by Red Hat, Inc.&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;ena_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;release&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;product&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RHEL&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ga&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;variant&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BaseOS&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;root_device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/dev/sda1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;sriov_net_support&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;simple&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;virtualization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hvm&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;volume&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gp3&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;overwrite&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AWS&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_major&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_minor&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;restrict_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pubtools-marketplacesvm</a></h1>



<p class="blurb">Publishing tools for various cloud marketplaces</p>






<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Command Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../combined_push.html">combined-push</a></li>
<li class="toctree-l1"><a class="reference internal" href="../marketplace_push.html">marketplace-push</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_push.html">community-push</a></li>
<li class="toctree-l1"><a class="reference internal" href="../delete.html">delete</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common arguments and parameters:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="credentials.html">Credentials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Destination Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">Supported Sources</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/release-engineering/pubtools-marketplacesvm">Source</a></li>
    
    <li class="toctree-l1"><a href="genindex.html">Index</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="credentials.html" title="previous chapter">Credentials</a></li>
      <li>Next: <a href="sources.html" title="next chapter">Supported Sources</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Red Hat.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/common/mappings.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>